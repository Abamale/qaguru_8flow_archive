если есть настройка порога
если цена повысилась или не изменилась → бакет 1 (пример:  рек. цена=110, текущая =100, порог снижения = 20%.   проверка (110/100-1)*100>=0 )
если цена понизилась на меньший процент, чем указано в настройке → бакет 2 (пример:  рек. цена=90, текущая =100, порог снижения = 20%.   проверка 0>(90/100-1)*100>-1*20 )
если цена понизилась на больший процент, чем указано в настройке → бакет 3 (пример:  рек. цена=70, текущая =100, порог снижения = 20%.   проверка -1*20>(70/100-1)*100 )

если нет настройки порога
если цена повысилась или не изменилась → бакет 1
если цена понизилась → бакет 2

независимо от настройки порога: если нет текущей цены (regular_price или promo_price is null) → бакет 3